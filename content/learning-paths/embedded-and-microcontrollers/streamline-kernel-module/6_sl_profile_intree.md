---
title: Profile the in-tree kernel driver
weight: 7

### FIXED, DO NOT MODIFY
layout: learningpathall
---

## Use Streamline to profile an in-tree kernel driver

Profiling in-tree drivers follows almost the same process as profiling an out-of-tree kernel module. The steps include:

1. Transferring `gator` to the target device using scp.

2. Launching Streamline, selecting TCP view, and entering the target’s IP or hostname.

3. Setting up counters and enabling Event-Based Sampling (EBS).

The main difference is that, instead of adding the kernel module’s object file as the capture image in Capture settings, you use the Linux ELF file (vmlinux) generated by Buildroot.

![Streamline Capture settings dialog showing vmlinux selected as the capture image. The dialog displays fields for selecting the capture image, with vmlinux highlighted, and options for configuring counters and event-based sampling. The interface uses a neutral, technical design typical of profiling tools. The wider environment includes other Streamline configuration tabs and settings. Visible text includes Capture settings, Capture image, and vmlinux. alt-text#center](./images/img11_vmlinux_capture_settings.png)

After clicking Save in Capture settings dialog, you can start the capture and analyze it as you did before.
![Streamline function tab displaying profiling data for vmlinux. The main area shows a list of kernel functions with columns for metrics such as sample count and percentage of total samples. The function names are clearly listed, and the selected function is highlighted. The interface uses a neutral, technical design typical of performance profiling tools. Visible text includes Function, Sample Count, and Percentage. The wider environment includes other Streamline tabs and configuration options, reinforcing a focused, analytical workflow. ](./images/img12_vmlinux_function_tab.png)

Since you used `vmlinux` image, you can view the driver functions as well as all other kernel functions that were sampled during the capture.

You can also view the full Call path of any sampled function within the kernel.
![Streamline call paths tab displaying hierarchical call stack data for vmlinux. The main section shows a tree view of kernel function calls, with each function indented to indicate its position in the call hierarchy. Columns display metrics such as sample count and percentage of total samples for each function. The selected function is highlighted, and the interface uses a neutral, technical design typical of performance profiling tools. Visible text includes Call Paths, Sample Count, and Percentage. The wider environment features other Streamline tabs and configuration options, supporting a focused, analytical workflow.](./images/img13_vmlinux_callpaths_tab.png)
