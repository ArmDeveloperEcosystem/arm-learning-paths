name: Assign PR Reviewers

on:
  pull_request:
    types: [opened,review_requested]

jobs:
  add-reviewers:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
    - name: Install dependencies
      run: npm install @actions/github
    - name: Add reviewers
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  ## Please add the PAT token in the secrets with this name "GITHUB_TOKEN" 
        commit-message: 'Automatically assign reviewer to pull request'
        title: 'Please review my pull request'
        body: 'I would appreciate if you could review my pull request.'
      run: |
        const { context, GitHub } = require('@actions/github');
        const github = new GitHub(process.env.GITHUB_TOKEN);
        const prNumber = context.payload.pull_request.number;
        const reviewers = ['pareena.verma@arm.com', 'jason.randrews@arm.com'];
        github.pulls.createReviewRequest({
          owner: context.repo.owner,
          repo: context.repo.repo,
          pull_number: prNumber,
          reviewers: reviewers
        });
